<!-- menu.html -->
<nav class="main-nav">
    <div class="nav-container">
        <!-- Logo -->
        <a href="/" class="logo">
            <div style="width: 40px; height: 40px; background: #007bff; border-radius: 5px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 10px;">G33</div>
            <div>
                <div class="logo-text">GRADO33</div>
                <div class="logo-subtext">MARKETING BARINAS</div>
            </div>
        </a>
        
        <!-- Men√∫ Desktop -->
        <div class="desktop-menu">
            <a href="/" class="nav-link">Inicio</a>
            
            <!-- Dropdown SERVICIOS -->
            <div class="dropdown">
                <a href="/servicios/" class="nav-link dropdown-toggle">
                    Servicios <span style="margin-left: 5px;">‚ñº</span>
                </a>
                <div class="dropdown-menu">
                    <a href="/servicios/creacion-y-diseno-web/" class="dropdown-item">Dise√±o Web</a>
                    <a href="/servicios/tiendas-online-ecommerce/" class="dropdown-item">Ecommerce</a>
                    <a href="/servicios/posicionamiento-seo/" class="dropdown-item">Posicionamiento SEO</a>
                    <a href="/servicios/publicidad-google-ads/" class="dropdown-item">Google Ads</a>
                    <a href="/servicios/publicidad-meta-ads/" class="dropdown-item">Meta Ads</a>
                    <a href="/servicios/gestion-de-redes-sociales/" class="dropdown-item">Redes Sociales</a>
                    <a href="/servicios/mantenimiento-web/" class="dropdown-item">Mantenimiento Web</a>
                    <a href="/servicios/email-marketing/" class="dropdown-item">Email Marketing</a>
                    <a href="/servicios/diseno-grafico-publicitario/" class="dropdown-item">Dise√±o Gr√°fico</a>
                    <a href="/servicios/consultoria-marketing-digital/" class="dropdown-item">Consultor√≠a</a>
                </div>
            </div>
            
            <!-- Dropdown SOLUCIONES -->
            <div class="dropdown">
                <a href="/soluciones/" class="nav-link dropdown-toggle">
                    Soluciones <span style="margin-left: 5px;">‚ñº</span>
                </a>
                <div class="dropdown-menu">
                    <a href="/soluciones/crear-pagina-web/" class="dropdown-item">Crear P√°gina Web</a>
                    <a href="/soluciones/crear-pagina-web-para-mi-negocio/" class="dropdown-item">Web para Mi Negocio</a>
                    <a href="/soluciones/crear-pagina-web-para-vender/" class="dropdown-item">Web para Vender</a>
                    <a href="/soluciones/precio-de-una-pagina-web/" class="dropdown-item">Precio P√°gina Web</a>
                    <a href="/soluciones/publicidad-para-mi-negocio/" class="dropdown-item">Publicidad para Negocios</a>
                    <a href="/soluciones/que-es-marketing-digital/" class="dropdown-item">¬øQu√© es Marketing Digital?</a>
                    <a href="/soluciones/diseno-pagina-web-gratis/" class="dropdown-item">Dise√±o Web Gratis</a>
                    <a href="/soluciones/publicidad-para-restaurantes/" class="dropdown-item">Publicidad Restaurantes</a>
                    <a href="/soluciones/pagina-web-para-inmobiliarias/" class="dropdown-item">Web para Inmobiliarias</a>
                    <a href="/soluciones/posicionamiento-web-seo-local/" class="dropdown-item">SEO Local</a>
                </div>
            </div>
            
            <a href="/portafolio/" class="nav-link">Portafolio</a>
            <a href="/contacto/" class="nav-link">Contacto</a>
            
            <!-- WhatsApp -->
            <a href="https://wa.me/584167775771" class="whatsapp-btn">
                <span>üì±</span> WhatsApp
            </a>
        </div>
        
        <!-- Bot√≥n Hamburguesa -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle" type="button" aria-controls="mobileMenu" aria-expanded="false" aria-label="Abrir men√∫">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</nav>

<!-- Men√∫ M√≥vil -->
<div class="mobile-menu" id="mobileMenu">
    <a href="/" class="mobile-nav-link">Inicio</a>
    
    <!-- Dropdown SERVICIOS M√≥vil -->
    <div class="mobile-dropdown">
        <div class="mobile-dropdown-toggle" data-target="servicios-mobile">
            Servicios <span>‚ñº</span>
        </div>
        <div class="mobile-dropdown-menu" id="servicios-mobile">
            <a href="/servicios/creacion-y-diseno-web/" class="mobile-dropdown-item">Dise√±o Web</a>
            <a href="/servicios/tiendas-online-ecommerce/" class="mobile-dropdown-item">Ecommerce</a>
            <a href="/servicios/posicionamiento-seo/" class="mobile-dropdown-item">Posicionamiento SEO</a>
            <a href="/servicios/publicidad-google-ads/" class="mobile-dropdown-item">Google Ads</a>
            <a href="/servicios/publicidad-meta-ads/" class="mobile-dropdown-item">Meta Ads</a>
            <a href="/servicios/gestion-de-redes-sociales/" class="mobile-dropdown-item">Redes Sociales</a>
            <a href="/servicios/mantenimiento-web/" class="mobile-dropdown-item">Mantenimiento Web</a>
            <a href="/servicios/email-marketing/" class="mobile-dropdown-item">Email Marketing</a>
            <a href="/servicios/diseno-grafico-publicitario/" class="mobile-dropdown-item">Dise√±o Gr√°fico</a>
            <a href="/servicios/consultoria-marketing-digital/" class="mobile-dropdown-item">Consultor√≠a</a>
        </div>
    </div>
    
    <!-- Dropdown SOLUCIONES M√≥vil -->
    <div class="mobile-dropdown">
        <div class="mobile-dropdown-toggle" data-target="soluciones-mobile">
            Soluciones <span>‚ñº</span>
        </div>
        <div class="mobile-dropdown-menu" id="soluciones-mobile">
            <a href="/soluciones/crear-pagina-web/" class="mobile-dropdown-item">Crear P√°gina Web</a>
            <a href="/soluciones/crear-pagina-web-para-mi-negocio/" class="mobile-dropdown-item">Web para Mi Negocio</a>
            <a href="/soluciones/crear-pagina-web-para-vender/" class="mobile-dropdown-item">Web para Vender</a>
            <a href="/soluciones/precio-de-una-pagina-web/" class="mobile-dropdown-item">Precio P√°gina Web</a>
            <a href="/soluciones/publicidad-para-mi-negocio/" class="mobile-dropdown-item">Publicidad para Negocios</a>
            <a href="/soluciones/que-es-marketing-digital/" class="mobile-dropdown-item">¬øQu√© es Marketing Digital?</a>
            <a href="/soluciones/diseno-pagina-web-gratis/" class="mobile-dropdown-item">Dise√±o Web Gratis</a>
            <a href="/soluciones/publicidad-para-restaurantes/" class="mobile-dropdown-item">Publicidad Restaurantes</a>
            <a href="/soluciones/pagina-web-para-inmobiliarias/" class="mobile-dropdown-item">Web para Inmobiliarias</a>
            <a href="/soluciones/posicionamiento-web-seo-local/" class="mobile-dropdown-item">SEO Local</a>
        </div>
    </div>
    
    <a href="/portafolio/" class="mobile-nav-link">Portafolio</a>
    <a href="/contacto/" class="mobile-nav-link">Contacto</a>
    
    <!-- WhatsApp M√≥vil -->
    <div class="mobile-whatsapp">
        <a href="https://wa.me/584167775771" class="whatsapp-btn">
            <span>üì±</span> WhatsApp
        </a>
    </div>
</div>

<!-- Overlay para cerrar men√∫ -->
<div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>

<style>
    /* ESTILOS DEL MEN√ö RESPONSIVE (mejoras para evitar overflow y gaps laterales) */

    /* Base: prevenir scroll horizontal en cualquier p√°gina que inyecte este men√∫ */
    html, body {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        overflow-x: hidden; /* evita el espacio blanco lateral */
        -webkit-font-smoothing: antialiased;
    }

    .main-nav {
        background: #f8f9fa;
        padding: 12px 0;
        position: sticky;
        top: 0;
        z-index: 1100;
        box-shadow: 0 2px 10px rgba(0,0,0,0.06);
        width: 100%;
    }

    .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-sizing: border-box;
    }

    .logo {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: #333;
        z-index: 1102;
    }

    .logo-text {
        font-weight: bold;
        line-height: 1.2;
        font-size: 1.15rem;
    }

    .logo-subtext {
        font-size: 0.8em;
        line-height: 1.2;
        color: #666;
    }

    /* MEN√ö DESKTOP */
    .desktop-menu {
        display: flex;
        gap: 24px;
        align-items: center;
    }

    @media (max-width: 992px) {
        .desktop-menu { display: none; }
    }

    .nav-link { text-decoration: none; color: #333; font-weight: 500; transition: color .2s ease; }
    .nav-link:hover { color: #007bff; }
    .nav-link.active { color: #007bff; font-weight: 700; }

    /* DROPDOWNS */
    .dropdown { position: relative; }
    .dropdown-toggle { display: flex; align-items: center; cursor: pointer; }

    .dropdown-menu {
        position: absolute; top: 100%; left: 0; background: #fff; box-shadow: 0 6px 18px rgba(0,0,0,0.08);
        border-radius: 6px; min-width: 260px; padding: 8px 0; display: none; z-index: 1101; box-sizing: border-box;
    }
    .dropdown:hover .dropdown-menu { display: block; }
    .dropdown-item { display: block; padding: 9px 18px; text-decoration: none; color: #333; border-bottom: 1px solid #f0f0f0; transition: background .15s; }
    .dropdown-item:hover { background: #f8f9fa; }
    .dropdown-item:last-child { border-bottom: none; }

    /* BOT√ìN WHATSAPP */
    .whatsapp-btn { background: #25D366; color: #fff; padding: 10px 16px; border-radius: 6px; text-decoration: none; font-weight: 700; display: flex; align-items: center; }
    .whatsapp-btn:hover { background: #128C7E; }

    /* MEN√ö HAMBURGUESA */
    .mobile-menu-toggle { display: none; flex-direction: column; justify-content: space-between; width: 30px; height: 21px; background: transparent; border: none; cursor: pointer; padding: 0; z-index: 1102; }
    .mobile-menu-toggle span { display: block; height: 3px; width: 100%; background: #333; border-radius: 3px; transition: transform .25s, opacity .25s; }
    .mobile-menu-toggle.active span:nth-child(1) { transform: translateY(9px) rotate(45deg); }
    .mobile-menu-toggle.active span:nth-child(2) { opacity: 0; }
    .mobile-menu-toggle.active span:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }
    @media (max-width: 992px) { .mobile-menu-toggle { display: flex; } }

    /* MEN√ö M√ìVIL: en pantallas peque√±as ocupar todo el ancho (evita gaps) */
    .mobile-menu {
        position: fixed; top: 0; right: -100%; width: 80%; max-width: 420px; height: 100vh; background: #fff; box-shadow: -6px 0 20px rgba(0,0,0,0.08);
        padding: 78px 18px 18px; overflow-y: auto; transition: right .28s ease; z-index: 1101; box-sizing: border-box;
    }

    /* En pantallas m√°s peque√±as, usar el 100% para evitar que quede un hueco blanco */
    @media (max-width: 420px) {
        .mobile-menu { width: 100%; max-width: none; right: -100%; }
    }

    .mobile-menu.active { right: 0; }
    .mobile-nav-link { display: block; padding: 14px 0; text-decoration: none; color: #333; font-weight: 600; border-bottom: 1px solid #f0f0f0; }
    .mobile-dropdown-toggle { display: flex; justify-content: space-between; align-items: center; padding: 14px 0; text-decoration: none; color: #333; font-weight: 600; border-bottom: 1px solid #f0f0f0; cursor: pointer; }
    .mobile-dropdown-menu { display: none; padding-left: 12px; }
    .mobile-dropdown-menu.active { display: block; }
    .mobile-dropdown-item { display: block; padding: 10px 0; text-decoration: none; color: #666; border-bottom: 1px solid #f8f8f8; }
    .mobile-dropdown-item:last-child { border-bottom: none; }
    .mobile-whatsapp { margin-top: 18px; text-align: center; }

    /* Overlay */
    .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.45); opacity: 0; visibility: hidden; transition: opacity .2s ease, visibility .2s; z-index: 1100; }
    .overlay.active { opacity: 1; visibility: visible; }

    /* Ajustes finos para evitar que el contenido quede pegado al borde en m√≥viles */
    @media (max-width: 420px) {
        .nav-container { padding: 0 12px; }
        .logo-text { font-size: 1rem; }
        .whatsapp-btn { padding: 8px 12px; }
    }
</style>

<script>
    // Script para el men√∫ m√≥vil
    (function() {
        // Helper para cerrar el men√∫
        function closeMobileMenu(mobileMenuToggle, mobileMenu, overlay) {
            if (mobileMenuToggle) mobileMenuToggle.classList.remove('active');
            if (mobileMenu) mobileMenu.classList.remove('active');
            if (overlay) overlay.classList.remove('active');
            if (mobileMenuToggle) mobileMenuToggle.setAttribute('aria-expanded', 'false');
            if (overlay) overlay.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            // devolver foco al toggle
            if (mobileMenuToggle) mobileMenuToggle.focus();
        }

        function openMobileMenu(mobileMenuToggle, mobileMenu, overlay) {
            if (mobileMenuToggle) mobileMenuToggle.classList.add('active');
            if (mobileMenu) mobileMenu.classList.add('active');
            if (overlay) overlay.classList.add('active');
            if (mobileMenuToggle) mobileMenuToggle.setAttribute('aria-expanded', 'true');
            if (overlay) overlay.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
            // focus al primer elemento dentro del men√∫ m√≥vil
            if (mobileMenu) {
                const first = mobileMenu.querySelector('a, button, [tabindex]');
                if (first && typeof first.focus === 'function') first.focus();
            }
        }

        function initMobileMenu() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mobileMenu = document.getElementById('mobileMenu');
            const overlay = document.getElementById('overlay');

            // Delegated click handler for the toggle (robust if scripts load in different order)
            document.addEventListener('click', function(e) {
                const btn = e.target.closest && e.target.closest('#mobileMenuToggle');
                if (btn) {
                    // ensure elements exist
                    if (!mobileMenu || !overlay) {
                        // attempt to query again
                        mobileMenu = document.getElementById('mobileMenu');
                        overlay = document.getElementById('overlay');
                    }
                    const isOpen = btn.classList.contains('active');
                    if (isOpen) {
                        closeMobileMenu(btn, mobileMenu, overlay);
                    } else {
                        openMobileMenu(btn, mobileMenu, overlay);
                    }
                }
            }, false);

            // Also set a direct listener if the element exists (keeps aria state accurate)
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function(e) {
                    // prevent double-handling when delegated also runs
                    e.stopPropagation();
                    const isOpen = this.classList.contains('active');
                    if (isOpen) {
                        closeMobileMenu(this, mobileMenu, overlay);
                    } else {
                        openMobileMenu(this, mobileMenu, overlay);
                    }
                });
            }

            // Cerrar men√∫ al hacer clic en overlay
            if (overlay) {
                overlay.addEventListener('click', function() {
                    closeMobileMenu(mobileMenuToggle, mobileMenu, overlay);
                });
            }

            // Dropdowns en m√≥vil (sin cambios funcionales significativos)
            const mobileDropdownToggles = document.querySelectorAll('.mobile-dropdown-toggle');
            mobileDropdownToggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-target');
                    const targetMenu = document.getElementById(targetId);
                    document.querySelectorAll('.mobile-dropdown-menu.active').forEach(menu => {
                        if (menu.id !== targetId) menu.classList.remove('active');
                    });
                    if (targetMenu) {
                        targetMenu.classList.toggle('active');
                        const arrow = this.querySelector('span');
                        if (arrow) arrow.style.transform = targetMenu.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0)';
                    }
                });
            });

            // Cerrar men√∫ al hacer clic en un enlace
            const mobileLinks = document.querySelectorAll('.mobile-nav-link, .mobile-dropdown-item');
            mobileLinks.forEach(link => {
                link.addEventListener('click', function() {
                    closeMobileMenu(mobileMenuToggle, mobileMenu, overlay);
                });
            });

            // Cerrar men√∫ con tecla Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' || e.key === 'Esc') {
                    // if menu is open, close it
                    const isOpen = mobileMenu && mobileMenu.classList.contains('active');
                    if (isOpen) closeMobileMenu(mobileMenuToggle, mobileMenu, overlay);
                }
            });

            // Resaltar p√°gina activa
            highlightActivePage();
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initMobileMenu);
        } else {
            initMobileMenu();
        }
    })();

    function highlightActivePage() {
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link, .dropdown-item, .mobile-dropdown-item');
        
        navLinks.forEach(link => {
            const linkHref = link.getAttribute('href');
            if (linkHref) {
                // Normalizar las URLs para comparaci√≥n
                const normalizedCurrent = currentPath.replace(/\/$/, '');
                const normalizedLink = linkHref.replace(/\/$/, '');
                
                if (normalizedCurrent === normalizedLink || 
                    (normalizedCurrent.includes(normalizedLink) && normalizedLink !== '')) {
                    link.classList.add('active');
                    
                    // Si es un dropdown item, tambi√©n resaltar el padre
                    if (link.classList.contains('dropdown-item') || link.classList.contains('mobile-dropdown-item')) {
                        const dropdownToggle = link.closest('.dropdown')?.querySelector('.dropdown-toggle') || 
                                              link.closest('.mobile-dropdown')?.querySelector('.mobile-dropdown-toggle');
                        if (dropdownToggle) {
                            dropdownToggle.classList.add('active');
                        }
                    }
                }
            }
        });
    }
</script>